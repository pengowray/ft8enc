<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VK3PGO FT8 Player</title>
    <link href="style.css" rel="stylesheet" type="text/css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&family=Righteous&display=swap" rel="stylesheet">
</head>
<body class="dark-mode">
<div class="container">
    <button id="theme-toggle" aria-label="Toggle Dark Mode">ðŸŒ“</button>

    <h2>VK3PGO FT8 Player</h2>
    
    <div class="input-group">
      <input type="text" id="message-input" placeholder="Enter message to encode">
      <button id="encode-button" class="btn">Encode</button>
    </div>

    <div class="settings-toggle">
        <button id="toggle-settings">Audio Settings â–¼</button>
    </div>
    <div id="audio-settings" class="hidden">
        <div class="setting-group">
            <label for="base-freq-input">Base Frequency (Hz):</label>
            <input type="text" id="base-freq-input" placeholder="for example 500 or A4" value="500">
        </div>
        <div class="setting-group">
            <label for="sample-rate-select">Sample Rate:</label>
            <select id="sample-rate-select"></select>
        </div>
    </div>
    <div id="tab-container"></div>
    
    <div id="error-output"></div>
    
    <div id="audio-controls">
      <button id="play-audio" class="btn">Play Audio</button>
      <button id="play-audio-timed" class="btn">Play Next 15s Slot</button>
      <button id="stop-audio" class="btn" disabled>Stop Audio</button>
      <button id="download-audio" class="btn">Download Audio</button>
      <div id="countdown"></div>
    </div>

    <div id="message-content">

        <div id="piano-roll" style="margin-top: 20px;"></div>
        <div id="audio-visualization" height="200">
            <canvas id="waveform-canvas"></canvas>
            <div id="visualization-caption"></div>
            <div id="visualization-controls">
                <button id="toggle-visualization">Change Visualization</button>
                <span id="time-display">0.00 / 0.00</span>
            </div>
        </div>

        <div id="tribble-visualization" style="margin-top: 20px;"></div>

        <div id="output"></div>
        </div>
        
    <div id="example-messages">
        <h3>Example Messages:</h3>
    </div>

    <div id="test-inputs">
        <label for="test-select">Test Inputs:</label>
        <select id="test-select">
            <option value="">Select a test input</option>
        </select>
    </div>

    <div style="text-align: center;">
        <br>

        <a href="https://github.com/pengowray/ft8play">
        <img src="https://img.shields.io/badge/View%20on-GitHub-brightgreen" alt="View on GitHub">
        </a>
        <br>
        Created by Pengo Wray.

    </div>

    <div style="display: none;">
        <h2>Decoder</h2>
        <input type="file" id="audio-input" accept=".wav">
        <button id="decode-button">Decode</button>
        <div id="decode-output"></div>
    </div>
</div>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="./ft8lib/ft8_wasm.js" type="module"></script>
<script src="ft8_ft8lib.js" type="module"></script>
<script src="ft8_extra.js" type="module"></script>
<script src="ft8_msg.js" type="module"></script>
<script src="ft8_anno.js" type="module"></script>
<script src="ft8_explain.js" type="module"></script>
<script src="views.js" type="module"></script>
<script src="views_viz.js" type="module"></script>
<script src="views_piano.js" type="module"></script>
<script src="views_output.js" type="module"></script>
<script src="views_bits.js" type="module"></script>
<script src="views_play.js" type="module"></script>
<script src="ft8_tests.js" type="module"></script>
<script src="HamGridSquare.js" type="module"></script>
<script src="ctydata.js" type="module"></script>
<script src="mshv_ft8_wrap.js" type="module"></script>
<script src="./mshv/mshv_ft8.js" type="module"></script>
<script src="main.js" type="module"></script>
<script type="module">
import { initializeUI } from './main.js';

document.addEventListener('DOMContentLoaded', () => {
    initializeUI(); // main.js
});
</script>
</body>
</html>
